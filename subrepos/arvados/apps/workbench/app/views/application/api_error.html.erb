<%# Copyright (C) The Arvados Authors. All rights reserved.

SPDX-License-Identifier: AGPL-3.0 %>

<h2>Oh... fiddlesticks.</h2>

<p>An error occurred when Workbench sent a request to the Arvados API server.  Try reloading this page.  If the problem is temporary, your request might go through next time.

<% if not api_error %>
</p>
<% else %>
If that doesn't work, the information below can help system administrators track down the problem.
</p>

<dl>
  <dt>API request URL</dt>
  <dd><code><%= api_error.request_url %></code></dd>

  <% if api_error.api_response.empty? %>
  <dt>Invalid API response</dt>
  <dd><%= api_error.api_response_s %></dd>
  <% else %>
  <dt>API response</dt>
  <dd><pre><%= Oj.dump(api_error.api_response, indent: 2) %></pre></dd>
  <% end %>
</dl>
<% end %>

<%= render :partial => "report_error", :locals => {api_error: api_error, error_type: 'api'} %>
